<!doctype html>

<html lang="en">

<head>
    <meta charset="utf-8">

    <title>Animal Habitat interactive map</title>
    <meta name="description" content="test">
    <meta name="author" content="slawomir.biernacki">

    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"> -->

    <link rel="stylesheet" href="css/styles.css?v=1.0">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"
        integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
        crossorigin="" />
</head>

<body>

    <style>
        #mapid {
            height: 400px;
        }

        /* svg {
            position: relative;
        } */

        path {
            fill: rgb(16, 236, 64);
            fill-opacity: .7;
            stroke: rgb(90, 89, 89);
            stroke-width: 3.5px;
        }

        /* path:hover {
            fill: brown;
            fill-opacity: .7;
        } */
    </style>

    <div class="container">
        <button type="button" class="btn btn-primary" id="btn1">Monkey happy</button>
        <button type=" button" class="btn btn-primary" id="btn2">Monkey sad</button>
    </div>
    <!-- <script src="https://d3js.org/d3.v5.min.js"></script> -->
    <!-- <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"
        integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og=="
        crossorigin=""></script> -->

    <script src="//d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="https://d3js.org/queue.v1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.5/leaflet.js"></script>
    <script>
        function main() {

            var width = 960,
                height = 500;

            var svg = d3.select("body").append("svg")
                .attr("width", width)
                .attr("height", height);
            var g = svg.append("g")

            queue()
                .defer(d3.json, "monkey1.json")
                .defer(d3.json, "monkey2.json")
                .await(function (error, file1, file2) {
                    if (error) {
                        console.error('Oh dear, something went wrong: ' + error);
                    }
                    else {
                        doStuff(file1, file2);
                    }
                });
            function doStuff(collection1, collection2) {

                collection = collection1
                var projection = d3.geo.equirectangular()
                var projection2 = d3.geo.albers()
                    .rotate([120, 0])
                    .center([0, 37.7])
                    .scale(2700);
                var geoGenerator = d3.geo.path().projection(projection);

                var feature = g.selectAll("path")
                    .data(collection.features)
                    .enter().append("path");

                feature.attr("d", geoGenerator);

                $("#btn1").click(function () {
                    console.log("btn1")
                    update(collection1)
                });

                $("#btn2").click(function () {
                    console.log("btn2")
                    update(collection2)
                });

                function update(data) {
                    var t = d3.transition()
                        .duration(750);

                    var sel = g.selectAll("path")
                        .data(data.features)

                    sel.enter()
                        .append("path")

                    sel.transition().duration(1000)
                        .attr("d", geoGenerator);
                };
            }

        }
        window.onload = main;
    </script>



    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script> -->
</body>

</html>